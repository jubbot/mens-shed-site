<section>
        <div class="grid">
            <div class="l-6 m-6 s-12">
                <div class="panel">
                    <h3><i class="wt-toolbox"></i> Job Request Form</h3>
                    <div class="grid tally">
                    <div class="item">
                        <div class="count">20<span>K</span></div>
                        <h4>Views</h4>
                    </div>

                      <div class="item">
                        <div class="count">420<span></span></div>
                        <h4>Submission</h4>
                    </div>
                    </div>
               
  <div class="tabs" data-tabs>
  <div class="tabs__header" role="tablist" aria-label="Job Request insights">
   <button class="tabs__tab is-active" id="jr-tab-requests" role="tab" aria-selected="true" aria-controls="jr-panel-requests">
  Popular Job Requests
</button>
<button class="tabs__tab" id="jr-tab-environment" role="tab" aria-selected="false" aria-controls="jr-panel-environment">
  Environment of Use
</button>
  </div>

  <!-- Panel 1 -->
  <div class="tabs__panel" id="jr-panel-requests" aria-labelledby="jr-tab-requests">
    <h3 class="subtitle">Popular Job Requests</h3>
    <ol class="toplist">
      <li class="row"><span class="title">Repair / Restoration</span><span class="count">10</span></li>
      <li class="row"><span class="title">Rebuild / Modify</span><span class="count">10</span></li>
      <li class="row"><span class="title">New Build / Fabrication</span><span class="count">10</span></li>
      <li class="row"><span class="title">3D Printing</span><span class="count">10</span></li>
      <li class="row"><span class="title">Laser Cutting / Engraving</span><span class="count">10</span></li>
      <li class="row"><span class="title">Electronics</span><span class="count">10</span></li>
      <li class="row"><span class="title">Other</span><span class="count">10</span></li>
    </ol>
  </div>

  <!-- Panel 2 -->
  <div class="tabs__panel" id="jr-panel-environment" aria-labelledby="jr-tab-environment" hidden>
    <h3 class="subtitle">Environment of Use</h3>
    <ol class="toplist">
      <li class="row"><span class="title">Outdoor Use</span><span class="count">10</span></li>
      <li class="row"><span class="title">Indoor Use</span><span class="count">10</span></li>
      <li class="row"><span class="title">Food Contact</span><span class="count">10</span></li>
    </ol>
  </div>
</div>

</div>
            </div>
               <div class="l-6 m-6 s-12">
                <div class="panel">
                    <h3><i class="wt-users"></i> Membership Form</h3>
                    
                    <div class="grid tally">
                    <div class="item">
                        <div class="count">520<span>K</span></div>
                        <h4>Views</h4>
                    </div>

                      <div class="item">
                        <div class="count">20<span></span></div>
                        <h4>Submission</h4>
                    </div>
                    </div>
                 <div class="tabs" data-tabs>
  <div class="tabs__header" role="tablist" aria-label="Member insights">
    <button
      class="tabs__tab is-active"
      id="tab-health"
      role="tab"
      aria-selected="true"
      aria-controls="panel-health"
      tabindex="0"
    >
      Health &amp; Wellbeing
    </button>
    <button
      class="tabs__tab"
      id="tab-referrals"
      role="tab"
      aria-selected="false"
      aria-controls="panel-referrals"
      tabindex="-1"
    >
      How People Heard About Us
    </button>
  </div>

  <!-- Panel 1 -->
  <div
    class="tabs__panel"
    id="panel-health"
    role="tabpanel"
    aria-labelledby="tab-health"
  >
    <h3 class="subtitle">Common Health (self-reported)</h3>
    <ol class="toplist">
      <li class="row"><span class="title">Diabetes</span><span class="count">10</span></li>
      <li class="row"><span class="title">Heart Disease</span><span class="count">10</span></li>
      <li class="row"><span class="title">High Blood Pressure</span><span class="count">10</span></li>
      <li class="row"><span class="title">High Cholesterol</span><span class="count">10</span></li>
      <li class="row"><span class="title">Hearing Loss</span><span class="count">10</span></li>
      <li class="row"><span class="title">Arthritis</span><span class="count">10</span></li>
      <li class="row"><span class="title">Asthma</span><span class="count">10</span></li>
      <li class="row"><span class="title">Chronic Lung Condition (COPD)</span><span class="count">10</span></li>
      <li class="row"><span class="title">Prostate Issues</span><span class="count">10</span></li>
      <li class="row"><span class="title">Mobility Issues</span><span class="count">10</span></li>
      <li class="row"><span class="title">Vision Impairment</span><span class="count">10</span></li>
      <li class="row"><span class="title">Mental Health (Depression, Anxiety)</span><span class="count">10</span></li>
      <li class="row"><span class="title">No known conditions</span><span class="count">10</span></li>
    </ol>
  </div>

  <!-- Panel 2 -->
  <div
    class="tabs__panel"
    id="panel-referrals"
    role="tabpanel"
    aria-labelledby="tab-referrals"
    hidden
  >
    <h3 class="subtitle">How People Heard About Us</h3>
    <ol class="toplist">
      <li class="row"><span class="title">Friend or Family</span><span class="count">10</span></li>
      <li class="row"><span class="title">Flyer or Poster</span><span class="count">10</span></li>
      <li class="row"><span class="title">Facebook or Social Media</span><span class="count">10</span></li>
      <li class="row"><span class="title">Our Website</span><span class="count">10</span></li>
      <li class="row"><span class="title">Community Event</span><span class="count">10</span></li>
      <li class="row"><span class="title">Local Council</span><span class="count">10</span></li>
      <li class="row"><span class="title">Radio or Newspaper</span><span class="count">10</span></li>
      <li class="row"><span class="title">Health Professional</span><span class="count">10</span></li>
      <li class="row"><span class="title">Other</span><span class="count">10</span></li>
    </ol>
  </div>
</div>
                </div>
            </div>
        </div>
    </section>
    <script is:inline>
(() => {
  let uid = 0;

  function initTabs(root) {
    if (root.dataset.tabsInit === "1") return; // guard against double init
    root.dataset.tabsInit = "1";

    const idBase = `tabs-${uid++}`;
    const tablist = root.querySelector('[role="tablist"]') || root.querySelector('.tabs__header');
    if (!tablist) return;

    // KEY CHANGE: include .tabs__tab as a fallback
    const tabs = Array.from(tablist.querySelectorAll('[role="tab"], .tabs__tab'));
    const panels = Array.from(root.querySelectorAll('.tabs__panel, [role="tabpanel"]'));

    tabs.forEach((tab, i) => {
      // Ensure roles/ARIA present
      if (!tab.id) tab.id = `${idBase}-tab-${i}`;
      tab.setAttribute('role', 'tab');

      let panel;
      const controls = tab.getAttribute('aria-controls');
      if (controls) {
        panel = root.querySelector(`#${CSS.escape(controls)}`);
      }
      if (!panel) {
        panel = panels[i];
        if (panel) {
          if (!panel.id) panel.id = `${idBase}-panel-${i}`;
          tab.setAttribute('aria-controls', panel.id);
        }
      }
      if (panel) {
        panel.setAttribute('role', 'tabpanel');
        panel.setAttribute('aria-labelledby', tab.id);
      }
      // Reset selected state; we'll set the active one below
      tab.setAttribute('aria-selected', 'false');
      tab.tabIndex = -1;
    });

    let activeIndex = tabs.findIndex(t =>
      t.classList.contains('is-active') || t.getAttribute('aria-selected') === 'true'
    );
    if (activeIndex < 0) activeIndex = Number(root.dataset.active ?? 0);

    function activate(index) {
      tabs.forEach((t, i) => {
        const selected = i === index;
        t.classList.toggle('is-active', selected);
        t.setAttribute('aria-selected', String(selected));
        t.tabIndex = selected ? 0 : -1;

        const panelId = t.getAttribute('aria-controls');
        const panel = panelId && root.querySelector(`#${CSS.escape(panelId)}`);
        if (panel) panel.hidden = !selected;
      });
      tabs[index]?.focus();
    }

    tabs.forEach((tab, i) => {
      tab.addEventListener('click', () => activate(i));
      tab.addEventListener('keydown', (e) => {
        const last = tabs.length - 1;
        if (e.key === 'ArrowRight') { e.preventDefault(); activate((i + 1) % tabs.length); }
        if (e.key === 'ArrowLeft')  { e.preventDefault(); activate((i - 1 + tabs.length) % tabs.length); }
        if (e.key === 'Home')       { e.preventDefault(); activate(0); }
        if (e.key === 'End')        { e.preventDefault(); activate(last); }
      });
    });

    activate(Math.max(0, Math.min(activeIndex, tabs.length - 1)));
  }

  // Init all current groups after DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('[data-tabs]').forEach(initTabs);
    });
  } else {
    document.querySelectorAll('[data-tabs]').forEach(initTabs);
  }
})();
</script>
